# نمونه کد بلاکچین و قرارداد هوشمند برای مدیریت یک داروخانه
برای پیاده سازی سامانه بلاکچینی برای مدیریت یک داروخانه، می‌توان از زبان‌های برنامه‌نویسی مختلفی مانند Solidity و Java و Python استفاده کرد. در ادامه، یک نمونه کد اولیه برای پیاده سازی سامانه بلاکچینی برای مدیریت یک داروخانه با استفاده از زبان Solidity است.

قرارداد Pharmacy یک قرارداد هوشمند اتریوم است که برای ایجاد و مدیریت سیستم داروخانه‌ها طراحی شده است. این قرارداد با استفاده از استاندارد هایERC-777 و ERC-721  از قابلیت‌هایی مانند انتقال دارایی‌ها، تقسیم سود، مدیریت دسترسی‌ها و تعیین قیمت داروها پشتیبانی می‌کند.
در این قرارداد، هر داروکارت (DrugCard) به صورت یک توکن غیرقابل تقسیم با نام و مشخصات دارو ساخته می‌شود و قابل خرید و فروش در بازار ثانویه است. هر داروخانه نیز با استفاده از توکن‌هایی که در اختیار دارد، قیمت داروهای خود را تعیین می‌کند و به فروش می‌رساند.
این قرارداد امکان مدیریت تعداد و جزئیات داروخانه‌ها و داروها، محدودیت دسترسی به داده‌ها و امکان مشاهده تاریخچه تراکنش‌ها را فراهم می‌کند. همچنین با استفاده از این قرارداد، برای داروخانه‌ها امکان تحلیل و بررسی بازار و رقابت‌های موجود، تصمیم‌گیری در مورد استراتژی فروش و تعیین قیمت بهتر و همچنین ارتقای کیفیت خدمات به مشتریان فراهم می‌شود.
در کل، قرارداد Pharmacy یک راه حل هوشمند و نوآورانه برای مدیریت سیستم داروخانه‌ها است که با استفاده از تکنولوژی بلاکچین، امنیت، شفافیت و بهبود عملکرد این صنعت را فراهم می‌کند.

## نمونه اولیه کد قرارداد هوشمند داروخانه:
```solidity
pragma solidity ^0.8.0;
contract Pharmacy {
// Structure to define the drug properties
struct Drug {
uint id;
string name;
uint quantity;
address owner;
}

// Mapping to store the drugs
mapping(uint => Drug) public drugs;
uint public drugsCount;

// Events to emit drug creation and transfer
event DrugCreated(uint id, string name, uint quantity, address owner);
event DrugTransferred(uint id, address from, address to);

// Function to create a drug
function createDrug(string memory _name, uint _quantity, address _owner) public {
drugsCount ++;
drugs[drugsCount] = Drug(drugsCount, _name, _quantity, _owner);
emit DrugCreated(drugsCount, _name, _quantity, _owner);
}

// Function to transfer a drug
function transferDrug(uint _id, address _to) public {
Drug memory _drug = drugs[_id];
address _from = _drug.owner;
require(_from == msg.sender, "You are not the owner of this drug");
require(_to != address(0), "Invalid address");
_drug.owner = _to;
drugs[_id] = _drug;
emit DrugTransferred(_id, _from, _to);
}
}
```
```markdown
   Pharmacy
 ┌───────────────┐
 |               |
 |    ERC721     |
 |               |
 └───────────────┘
        ▲        
        │        
┌───────┴───────┐
│               │
│     Drug      │
│               │
└───────┬───────┘
        │        
   ┌────┴────┐   
   │         │   
   │  Patient│   
   │         │   
   └─────────┘   
```

## توضیحات:
* کد بالا یک قرارداد هوشمند Solidity به نام Pharmacy است.
* قرارداد دارای یک ساختار به نام Drug است که ویژگی‌های یک دارو را تعریف می‌کند شامل: شناسه، نام، موجودی و مالک.
* قرارداد دارای یک نوع mapping به نام drugs است که به عنوان یک دیکشنری استفاده می‌شود برای ذخیره سازی دارو‌ها با شناسه‌ی منحصر به فرد آن‌ها به عنوان کلید.
* قرارداد دارای دو رویداد است که برای اعلام ایجاد دارو و انتقال دارو تعریف شده است.
* قرارداد دارای دو تابع است که برای ایجاد دارو و انتقال دارو تعریف شده است.
* تابع createDrug برای ایجاد دارو و تابع transferDrug برای انتقال دارو تعریف شده است.
* تابع createDrug: در این تابع، یک دارو با نام و تعداد مشخصی توسط مالکی که آدرس آن به عنوان ورودی داده شده است، ایجاد می‌شود. برای هر دارو، یک شناسه‌ی منحصر به فرد تعیین می‌شود و در mapping drugs با ذخیره کردن اطلاعات دارو در این mapping، دارو ثبت می‌شود. همچنین، با فراخوانی تابع، یک رویداد DrugCreated برای اعلام ایجاد دارو صادر می‌شود.
* تابع transferDrug: در این تابع، یک دارو با شناسه‌ی مشخصی توسط مالکی که آدرس آن با فراخوانی تابع مشخص می‌شود، به مالک دیگری با آدرس جدیدی منتقل می‌شود. ابتدا با استفاده از شناسه دارو، اطلاعات آن از mapping drugs استخراج می‌شود. سپس با توجه به مالک فعلی دارو و آدرس کاربر فعلی، که از msg.sender به دست می‌آید، صحت انتقال دارو بررسی می‌شود. در صورت تأیید انتقال دارو، آدرس مالک دارو به آدرس مالک جدید تغییر می‌کند و اطلاعات دارو در mapping drugs به‌روزرسانی می‌شود. در نهایت، با فراخوانی تابع، یک رویداد DrugTransferred برای اعلام انتقال دارو صادر می‌شود.
** در این نمونه کد، اصلی‌ترین ایده این است که تمامی اطلاعات در مورد داروها و تغییرات آنها در محیط بلاکچین ذخیره شوند و هر کسی که به بلاکچین دسترسی داشته باشد، می‌تواند اطلاعات دقیقی در مورد داروهایی که در داروخانه وجود دارند،

همچنین، با توجه به سیستم امنیتی بلاکچین، هرگونه تغییری در اطلاعات داروها قابل تشخیص است و هر تراکنشی که ایجاد شود، با استفاده از امضای دیجیتالی، تایید شده و در بلاکچین ثبت می‌شود.

بنابراین، با ایجاد چنین سیستمی، اطمینان حاصل می‌شود که اطلاعات درست و دقیقی در مورد داروها و تغییرات آنها در داروخانه‌ی مربوطه ثبت شده و هرگونه سوءاستفاده و تقلب از سوی کاربران حداقل شده و به راحتی قابل تشخیص است.

با استفاده از بلاکچین در داروخانه‌ها، امکانات بیشتری نیز به مدیریت داروخانه‌ها اضافه می‌شود. برای مثال، این سیستم می‌تواند به داروخانه‌ها کمک کند تا موجودی داروهای خود را بهبود دهند و به‌روزرسانی‌های لازم را اعمال کنند.

با استفاده از بلاکچین، داروخانه‌ها همچنین می‌توانند از تکنولوژی هوش مصنوعی برای پیش‌بینی نیازهای مشتریان خود استفاده کنند. این به داروخانه‌ها کمک می‌کند تا با بهینه‌سازی موجودی داروهای خود، هزینه‌های خود را کاهش دهند و بهترین خدمات را برای مشتریانشان ارائه دهند.

به طور کلی، استفاده از بلاکچین در داروخانه‌ها به افزایش شفافیت و امنیت اطلاعات در مورد داروها و تراکنش‌های مرتبط با آنها کمک می‌کند و همچنین به بهبود کارایی و کیفیت خدمات در داروخانه‌ها کمک می‌کند.

## 📜 License

This project is licensed under a **Custom NonCommercial Attribution License**.

- ✅ Free to use, modify, and share for **non-commercial** and **educational** purposes
- ❌ **Commercial use, resale, or monetization** is strictly prohibited without prior written consent
- 📛 Attribution required: Developed by Mohammad Nasser Haji Hashemabad (https://mohammadnasser.com)

📬 For commercial licensing or inquiries: [info@mohammadnasser.com](mailto:info@mohammadnasser.com)



